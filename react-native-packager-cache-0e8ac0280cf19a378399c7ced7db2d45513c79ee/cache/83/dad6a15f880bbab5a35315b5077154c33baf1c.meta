["f2624493f540fd1adb9503bfa4dbbc22b1d9f142","deca12f776b17b22ea6928af14417b91d7db1682",["Dimensions","InspectorOverlay","InspectorPanel","Platform","React","ReactNative","StyleSheet","Touchable","UIManager","View","fbjs/lib/emptyObject","fbjs/lib/invariant","flattenStyle"],[80,126,176,218,251,287,328,367,405,438,474,523,659],{"version":3,"sources":["/Users/mani/Documents/Udacity/Core/React_Native/UdaciFitness/node_modules/react-native/Libraries/Inspector/Inspector.js"],"names":["Dimensions","require","InspectorOverlay","InspectorPanel","Platform","React","ReactNative","StyleSheet","Touchable","UIManager","View","emptyObject","invariant","hook","window","__REACT_DEVTOOLS_GLOBAL_HOOK__","renderer","findRenderer","resolveRNStyle","renderers","_renderers","keys","Object","length","Inspector","props","state","devtoolsAgent","hierarchy","panelPos","inspecting","perfing","inspected","selection","inspectedViewTag","networking","on","attachToDevtools","reactDevtoolsAgent","_subs","map","fn","off","newProps","setState","i","hierarchyItem","getInspectorData","findNodeHandle","measure","source","x","y","width","height","left","top","frame","style","touchedViewTag","pointerY","getInspectorDataForViewTag","offsetFromLeaf","selectFromDOMNode","get","val","TOUCH_TARGET_DEBUG","onRequestRerenderApp","panelContainerStyle","bottom","OS","styles","container","onTouchViewTag","bind","panelContainer","setPerfing","setInspecting","setSelection","setTouchTargetting","setNetworking","Component","agent","_hideWait","hlSub","sub","node","name","clearTimeout","hideSub","setTimeout","create","position","backgroundColor","right","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule Inspector\n * @flow\n */\n\n/* eslint-disable dot-notation, no-dimensions-get-window */\n\n'use strict';\n\nconst Dimensions = require('Dimensions');\nconst InspectorOverlay = require('InspectorOverlay');\nconst InspectorPanel = require('InspectorPanel');\nconst Platform = require('Platform');\nconst React = require('React');\nconst ReactNative = require('ReactNative');\nconst StyleSheet = require('StyleSheet');\nconst Touchable = require('Touchable');\nconst UIManager = require('UIManager');\nconst View = require('View');\n\nconst emptyObject = require('fbjs/lib/emptyObject');\nconst invariant = require('fbjs/lib/invariant');\n\nexport type ReactRenderer = {\n  getInspectorDataForViewTag: (viewTag: number) => Object,\n};\n\nconst hook = window.__REACT_DEVTOOLS_GLOBAL_HOOK__;\nconst renderer: ReactRenderer = findRenderer();\n// required for devtools to be able to edit react native styles\nhook.resolveRNStyle = require('flattenStyle');\n\nfunction findRenderer(): ReactRenderer {\n  const renderers = hook._renderers;\n  const keys = Object.keys(renderers);\n  invariant(keys.length === 1, 'Expected to find exactly one React Native renderer on DevTools hook.');\n  return renderers[keys[0]];\n}\n\nclass Inspector extends React.Component<{\n  inspectedViewTag: ?number,\n  onRequestRerenderApp: (callback: (tag: ?number) => void) => void\n}, {\n  devtoolsAgent: ?Object,\n  hierarchy: any,\n  panelPos: string,\n  inspecting: bool,\n  selection: ?number,\n  perfing: bool,\n  inspected: any,\n  inspectedViewTag: any,\n  networking: bool,\n}> {\n  _subs: ?Array<() => void>;\n\n  constructor(props: Object) {\n    super(props);\n\n    this.state = {\n      devtoolsAgent: null,\n      hierarchy: null,\n      panelPos: 'bottom',\n      inspecting: true,\n      perfing: false,\n      inspected: null,\n      selection: null,\n      inspectedViewTag: this.props.inspectedViewTag,\n      networking: false,\n    };\n  }\n\n  componentDidMount() {\n    hook.on('react-devtools', this.attachToDevtools);\n    // if devtools is already started\n    if (hook.reactDevtoolsAgent) {\n      this.attachToDevtools(hook.reactDevtoolsAgent);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._subs) {\n      this._subs.map(fn => fn());\n    }\n    hook.off('react-devtools', this.attachToDevtools);\n  }\n\n  componentWillReceiveProps(newProps: Object) {\n    this.setState({inspectedViewTag: newProps.inspectedViewTag});\n  }\n\n  attachToDevtools = (agent: Object) => {\n    let _hideWait = null;\n    const hlSub = agent.sub('highlight', ({node, name, props}) => {\n      clearTimeout(_hideWait);\n\n      if (typeof node !== 'number') {\n        // Fiber\n        node = ReactNative.findNodeHandle(node);\n      }\n\n      UIManager.measure(node, (x, y, width, height, left, top) => {\n        this.setState({\n          hierarchy: [],\n          inspected: {\n            frame: {left, top, width, height},\n            style: props ? props.style : emptyObject,\n          },\n        });\n      });\n    });\n    const hideSub = agent.sub('hideHighlight', () => {\n      if (this.state.inspected === null) {\n        return;\n      }\n      // we wait to actually hide in order to avoid flicker\n      _hideWait = setTimeout(() => {\n        this.setState({\n          inspected: null,\n        });\n      }, 100);\n    });\n    this._subs = [hlSub, hideSub];\n\n    agent.on('shutdown', () => {\n      this.setState({devtoolsAgent: null});\n      this._subs = null;\n    });\n    this.setState({\n      devtoolsAgent: agent,\n    });\n  };\n\n\n  setSelection(i: number) {\n    const hierarchyItem = this.state.hierarchy[i];\n    // we pass in ReactNative.findNodeHandle as the method is injected\n    const {\n      measure,\n      props,\n      source,\n    } = hierarchyItem.getInspectorData(ReactNative.findNodeHandle);\n\n    measure((x, y, width, height, left, top) => {\n      this.setState({\n        inspected: {\n          frame: {left, top, width, height},\n          style: props.style,\n          source,\n        },\n        selection: i,\n      });\n    });\n  }\n\n  onTouchViewTag(touchedViewTag: number, frame: Object, pointerY: number) {\n    // Most likely the touched instance is a native wrapper (like RCTView)\n    // which is not very interesting. Most likely user wants a composite\n    // instance that contains it (like View)\n    const {\n      hierarchy,\n      props,\n      selection,\n      source,\n    } = renderer.getInspectorDataForViewTag(touchedViewTag);\n\n    if (this.state.devtoolsAgent) {\n      // Skip host leafs\n      const offsetFromLeaf = hierarchy.length - 1 - selection;\n      this.state.devtoolsAgent.selectFromDOMNode(touchedViewTag, true, offsetFromLeaf);\n    }\n\n    this.setState({\n      panelPos: pointerY > Dimensions.get('window').height / 2 ? 'top' : 'bottom',\n      selection,\n      hierarchy,\n      inspected: {\n        style: props.style,\n        frame,\n        source,\n      },\n    });\n  }\n\n  setPerfing(val: bool) {\n    this.setState({\n      perfing: val,\n      inspecting: false,\n      inspected: null,\n      networking: false,\n    });\n  }\n\n  setInspecting(val: bool) {\n    this.setState({\n      inspecting: val,\n      inspected: null\n    });\n  }\n\n  setTouchTargetting(val: bool) {\n    Touchable.TOUCH_TARGET_DEBUG = val;\n    this.props.onRequestRerenderApp((inspectedViewTag) => {\n      this.setState({inspectedViewTag});\n    });\n  }\n\n  setNetworking(val: bool) {\n    this.setState({\n      networking: val,\n      perfing: false,\n      inspecting: false,\n      inspected: null,\n    });\n  }\n\n  render() {\n    const panelContainerStyle = (this.state.panelPos === 'bottom') ?\n      {bottom: 0} :\n      {top: Platform.OS === 'ios' ? 20 : 0};\n    return (\n      <View style={styles.container} pointerEvents=\"box-none\">\n        {this.state.inspecting &&\n          <InspectorOverlay\n            inspected={this.state.inspected}\n            inspectedViewTag={this.state.inspectedViewTag}\n            onTouchViewTag={this.onTouchViewTag.bind(this)}\n          />}\n        <View style={[styles.panelContainer, panelContainerStyle]}>\n          <InspectorPanel\n            devtoolsIsOpen={!!this.state.devtoolsAgent}\n            inspecting={this.state.inspecting}\n            perfing={this.state.perfing}\n            setPerfing={this.setPerfing.bind(this)}\n            setInspecting={this.setInspecting.bind(this)}\n            inspected={this.state.inspected}\n            hierarchy={this.state.hierarchy}\n            selection={this.state.selection}\n            setSelection={this.setSelection.bind(this)}\n            touchTargetting={Touchable.TOUCH_TARGET_DEBUG}\n            setTouchTargetting={this.setTouchTargetting.bind(this)}\n            networking={this.state.networking}\n            setNetworking={this.setNetworking.bind(this)}\n          />\n        </View>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    backgroundColor: 'transparent',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n  },\n  panelContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n  },\n});\n\nmodule.exports = Inspector;\n"]}]